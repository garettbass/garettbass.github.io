System.register(["./p-596cb4f6.system.js","./p-f3667d5f.system.js","./p-2fd5b1c1.system.js","./p-06eef041.system.js","./p-0e5e3372.system.js","./p-5f1c8341.system.js","./p-d1031021.system.js"],(function(e,t){"use strict";var n,s,i,o,r,a,c,u,l,h,f,d,m,p,g,w,v,b,y;return{setters:[function(e){n=e.r;s=e.h;i=e.H;o=e.d;r=e.e},function(e){a=e.g;c=e.c;u=e.a},function(e){l=e.c;h=e.d},function(e){f=e.l;d=e.t;m=e.s;p=e.L;g=e.a;w=e.b},function(e){v=e.g},function(e){b=e.g},function(e){y=e.a}],execute:function(){const S="";const C=e("app_root",class{constructor(e){n(this,e);this.components=b()}render(){return s("ion-app",null,s("ion-router",{useHash:false},s("ion-route",{url:"/",component:"app-home"}),s("ion-route",{url:"/component",component:"app-home"}),this.components.filter(e=>e.name!=="tabs").map(e=>s("ion-route",{url:`/component/${e.id}`,component:`component-${e.id}`})),s("ion-route",{component:"component-tabs"},s("ion-route",{url:"/component/tabs/music",component:"tabs-music"}),s("ion-route",{url:"/component/tabs/movies",component:"tabs-movies"}),s("ion-route",{url:"/component/tabs/games",component:"tabs-games"}))),s("ion-nav",null))}});C.style=S;const R="html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}";const P=e("ion_app",class{constructor(e){n(this,e)}componentDidLoad(){{T(async()=>{const e=u(window,"hybrid");if(!c.getBoolean("_testing")){t.import("./p-213f6a91.system.js").then(e=>e.startTapClick(c))}if(c.getBoolean("statusTap",e)){t.import("./p-c5672d8e.system.js").then(e=>e.startStatusTap())}if(c.getBoolean("inputShims",k())){t.import("./p-d7826c46.system.js").then(e=>e.startInputShims(c))}const n=await t.import("./p-443f0870.system.js");if(c.getBoolean("hardwareBackButton",e)){n.startHardwareBackButton()}else{n.blockHardwareBackButton()}if(typeof window!=="undefined"){t.import("./p-d7a68a75.system.js").then(e=>e.startKeyboardAssist(window))}t.import("./p-a049099d.system.js").then(e=>e.startFocusVisible())})}}render(){const e=a(this);return s(i,{class:{[e]:true,"ion-page":true,"force-statusbar-padding":c.getBoolean("_forceStatusbarPadding")}})}get el(){return o(this)}});const k=()=>u(window,"ios")&&u(window,"mobile");const T=e=>{if("requestIdleCallback"in window){window.requestIdleCallback(e)}else{setTimeout(e,32)}};P.style=R;const E=1;const V=2;const j=3;class B{constructor(e,t){this.component=e;this.params=t;this.state=E}async init(e){this.state=V;if(!this.element){const t=this.component;this.element=await y(this.delegate,e,t,["ion-page","ion-page-invisible"],this.params)}}_destroy(){l(this.state!==j,"view state must be ATTACHED");const e=this.element;if(e){if(this.delegate){this.delegate.removeViewFromDom(e.parentElement,e)}else{e.remove()}}this.nav=undefined;this.state=j}}const L=(e,t,n)=>{if(!e){return false}if(e.component!==t){return false}const s=e.params;if(s===n){return true}if(!s&&!n){return true}if(!s||!n){return false}const i=Object.keys(s);const o=Object.keys(n);if(i.length!==o.length){return false}for(const r of i){if(s[r]!==n[r]){return false}}return true};const A=(e,t)=>{if(!e){return null}if(e instanceof B){return e}return new B(e,t)};const O=e=>e.map(e=>{if(e instanceof B){return e}if("component"in e){return A(e.component,e.componentProps===null?undefined:e.componentProps)}return A(e,undefined)}).filter(e=>e!==null);const I=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}";const N=e("ion_nav",class{constructor(e){n(this,e);this.transInstr=[];this.animationEnabled=true;this.useRouter=false;this.isTransitioning=false;this.destroyed=false;this.views=[];this.animated=true;this.ionNavWillLoad=r(this,"ionNavWillLoad",7);this.ionNavWillChange=r(this,"ionNavWillChange",3);this.ionNavDidChange=r(this,"ionNavDidChange",3)}swipeGestureChanged(){if(this.gesture){this.gesture.enable(this.swipeGesture===true)}}rootChanged(){if(this.root!==undefined){if(!this.useRouter){this.setRoot(this.root,this.rootParams)}}}componentWillLoad(){this.useRouter=!!document.querySelector("ion-router")&&!this.el.closest("[no-router]");if(this.swipeGesture===undefined){const e=a(this);this.swipeGesture=c.getBoolean("swipeBackEnabled",e==="ios")}this.ionNavWillLoad.emit()}async componentDidLoad(){this.rootChanged();this.gesture=(await t.import("./p-1a0df5dd.system.js")).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this));this.swipeGestureChanged()}disconnectedCallback(){for(const e of this.views){f(e.element,p);e._destroy()}if(this.gesture){this.gesture.destroy();this.gesture=undefined}this.transInstr.length=this.views.length=0;this.destroyed=true}push(e,t,n,s){return this.queueTrns({insertStart:-1,insertViews:[{component:e,componentProps:t}],opts:n},s)}insert(e,t,n,s,i){return this.queueTrns({insertStart:e,insertViews:[{component:t,componentProps:n}],opts:s},i)}insertPages(e,t,n,s){return this.queueTrns({insertStart:e,insertViews:t,opts:n},s)}pop(e,t){return this.queueTrns({removeStart:-1,removeCount:1,opts:e},t)}popTo(e,t,n){const s={removeStart:-1,removeCount:-1,opts:t};if(typeof e==="object"&&e.component){s.removeView=e;s.removeStart=1}else if(typeof e==="number"){s.removeStart=e+1}return this.queueTrns(s,n)}popToRoot(e,t){return this.queueTrns({removeStart:1,removeCount:-1,opts:e},t)}removeIndex(e,t=1,n,s){return this.queueTrns({removeStart:e,removeCount:t,opts:n},s)}setRoot(e,t,n,s){return this.setPages([{component:e,componentProps:t}],n,s)}setPages(e,t,n){if(t==null){t={}}if(t.animated!==true){t.animated=false}return this.queueTrns({insertStart:0,insertViews:e,removeStart:0,removeCount:-1,opts:t},n)}setRouteId(e,t,n,s){const i=this.getActiveSync();if(L(i,e,t)){return Promise.resolve({changed:false,element:i.element})}let o;const r=new Promise(e=>o=e);let a;const c={updateURL:false,viewIsReady:e=>{let t;const n=new Promise(e=>t=e);o({changed:true,element:e,markVisible:async()=>{t();await a}});return n}};if(n==="root"){a=this.setRoot(e,t,c)}else{const i=this.views.find(n=>L(n,e,t));if(i){a=this.popTo(i,Object.assign(Object.assign({},c),{direction:"back",animationBuilder:s}))}else if(n==="forward"){a=this.push(e,t,Object.assign(Object.assign({},c),{animationBuilder:s}))}else if(n==="back"){a=this.setRoot(e,t,Object.assign(Object.assign({},c),{direction:"back",animated:true,animationBuilder:s}))}}return r}async getRouteId(){const e=this.getActiveSync();return e?{id:e.element.tagName,params:e.params,element:e.element}:undefined}getActive(){return Promise.resolve(this.getActiveSync())}getByIndex(e){return Promise.resolve(this.views[e])}canGoBack(e){return Promise.resolve(this.canGoBackSync(e))}getPrevious(e){return Promise.resolve(this.getPreviousSync(e))}getLength(){return this.views.length}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(e=this.getActiveSync()){return!!(e&&this.getPreviousSync(e))}getPreviousSync(e=this.getActiveSync()){if(!e){return undefined}const t=this.views;const n=t.indexOf(e);return n>0?t[n-1]:undefined}async queueTrns(e,t){if(this.isTransitioning&&e.opts!=null&&e.opts.skipIfBusy){return Promise.resolve(false)}const n=new Promise((t,n)=>{e.resolve=t;e.reject=n});e.done=t;if(e.opts&&e.opts.updateURL!==false&&this.useRouter){const t=document.querySelector("ion-router");if(t){const n=await t.canTransition();if(n===false){return Promise.resolve(false)}else if(typeof n==="string"){t.push(n,e.opts.direction||"back");return Promise.resolve(false)}}}if(e.insertViews&&e.insertViews.length===0){e.insertViews=undefined}this.transInstr.push(e);this.nextTrns();return n}success(e,t){if(this.destroyed){this.fireError("nav controller was destroyed",t);return}if(t.done){t.done(e.hasCompleted,e.requiresTransition,e.enteringView,e.leavingView,e.direction)}t.resolve(e.hasCompleted);if(t.opts.updateURL!==false&&this.useRouter){const t=document.querySelector("ion-router");if(t){const n=e.direction==="back"?"back":"forward";t.navChanged(n)}}}failed(e,t){if(this.destroyed){this.fireError("nav controller was destroyed",t);return}this.transInstr.length=0;this.fireError(e,t)}fireError(e,t){if(t.done){t.done(false,false,e)}if(t.reject&&!this.destroyed){t.reject(e)}else{t.resolve(false)}}nextTrns(){if(this.isTransitioning){return false}const e=this.transInstr.shift();if(!e){return false}this.runTransition(e);return true}async runTransition(e){try{this.ionNavWillChange.emit();this.isTransitioning=true;this.prepareTI(e);const t=this.getActiveSync();const n=this.getEnteringView(e,t);if(!t&&!n){throw new Error("no views in the stack to be removed")}if(n&&n.state===E){await n.init(this.el)}this.postViewInit(n,t,e);const s=(e.enteringRequiresTransition||e.leavingRequiresTransition)&&n!==t;if(s&&e.opts&&t){const s=e.opts.direction==="back";if(s){e.opts.animationBuilder=e.opts.animationBuilder||n&&n.animationBuilder}t.animationBuilder=e.opts.animationBuilder}const i=s?await this.transition(n,t,e):{hasCompleted:true,requiresTransition:false};this.success(i,e);this.ionNavDidChange.emit()}catch(t){this.failed(t,e)}this.isTransitioning=false;this.nextTrns()}prepareTI(e){const t=this.views.length;e.opts=e.opts||{};if(e.opts.delegate===undefined){e.opts.delegate=this.delegate}if(e.removeView!==undefined){l(e.removeStart!==undefined,"removeView needs removeStart");l(e.removeCount!==undefined,"removeView needs removeCount");const t=this.views.indexOf(e.removeView);if(t<0){throw new Error("removeView was not found")}e.removeStart+=t}if(e.removeStart!==undefined){if(e.removeStart<0){e.removeStart=t-1}if(e.removeCount<0){e.removeCount=t-e.removeStart}e.leavingRequiresTransition=e.removeCount>0&&e.removeStart+e.removeCount===t}if(e.insertViews){if(e.insertStart<0||e.insertStart>t){e.insertStart=t}e.enteringRequiresTransition=e.insertStart===t}const n=e.insertViews;if(!n){return}l(n.length>0,"length can not be zero");const s=O(n);if(s.length===0){throw new Error("invalid views to insert")}for(const i of s){i.delegate=e.opts.delegate;const t=i.nav;if(t&&t!==this){throw new Error("inserted view was already inserted")}if(i.state===j){throw new Error("inserted view was already destroyed")}}e.insertViews=s}getEnteringView(e,t){const n=e.insertViews;if(n!==undefined){return n[n.length-1]}const s=e.removeStart;if(s!==undefined){const n=this.views;const i=s+e.removeCount;for(let e=n.length-1;e>=0;e--){const o=n[e];if((e<s||e>=i)&&o!==t){return o}}}return undefined}postViewInit(e,t,n){l(t||e,"Both leavingView and enteringView are null");l(n.resolve,"resolve must be valid");l(n.reject,"reject must be valid");const s=n.opts;const i=n.insertViews;const o=n.removeStart;const r=n.removeCount;let a;if(o!==undefined&&r!==undefined){l(o>=0,"removeStart can not be negative");l(r>=0,"removeCount can not be negative");a=[];for(let n=0;n<r;n++){const s=this.views[n+o];if(s&&s!==e&&s!==t){a.push(s)}}s.direction=s.direction||"back"}const c=this.views.length+(i!==undefined?i.length:0)-(r!==undefined?r:0);l(c>=0,"final balance can not be negative");if(c===0){console.warn(`You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.`,this,this.el);throw new Error("navigation stack needs at least one root page")}if(i){let e=n.insertStart;for(const t of i){this.insertViewAt(t,e);e++}if(n.enteringRequiresTransition){s.direction=s.direction||"forward"}}if(a&&a.length>0){for(const e of a){f(e.element,g);f(e.element,w);f(e.element,p)}for(const e of a){this.destroyView(e)}}}async transition(e,t,n){const s=n.opts;const i=s.progressAnimation?e=>this.sbAni=e:undefined;const o=a(this);const r=e.element;const u=t&&t.element;const l=Object.assign({mode:o,showGoBack:this.canGoBackSync(e),baseEl:this.el,animationBuilder:this.animation||s.animationBuilder||c.get("navAnimation"),progressCallback:i,animated:this.animated&&c.getBoolean("animated",true),enteringEl:r,leavingEl:u},s);const{hasCompleted:h}=await d(l);return this.transitionFinish(h,e,t,s)}transitionFinish(e,t,n,s){const i=e?t:n;if(i){this.cleanup(i)}return{hasCompleted:e,requiresTransition:true,enteringView:t,leavingView:n,direction:s.direction}}insertViewAt(e,t){const n=this.views;const s=n.indexOf(e);if(s>-1){l(e.nav===this,"view is not part of the nav");n.splice(t,0,n.splice(s,1)[0])}else{l(!e.nav,"nav is used");e.nav=this;n.splice(t,0,e)}}removeView(e){l(e.state===V||e.state===j,"view state should be loaded or destroyed");const t=this.views;const n=t.indexOf(e);l(n>-1,"view must be part of the stack");if(n>=0){t.splice(n,1)}}destroyView(e){e._destroy();this.removeView(e)}cleanup(e){if(this.destroyed){return}const t=this.views;const n=t.indexOf(e);for(let s=t.length-1;s>=0;s--){const e=t[s];const i=e.element;if(i){if(s>n){f(i,p);this.destroyView(e)}else if(s<n){m(i,true)}}}}canStart(){return!!this.swipeGesture&&!this.isTransitioning&&this.transInstr.length===0&&this.animationEnabled&&this.canGoBackSync()}onStart(){this.queueTrns({removeStart:-1,removeCount:1,opts:{direction:"back",progressAnimation:true}},undefined)}onMove(e){if(this.sbAni){this.sbAni.progressStep(e)}}onEnd(e,t,n){if(this.sbAni){this.animationEnabled=false;this.sbAni.onFinish(()=>{this.animationEnabled=true},{oneTimeCallback:true});let s=e?-.001:.001;if(!e){this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)");s+=v([0,0],[1,0],[.68,.28],[1,1],t)[0]}else{s+=v([0,0],[.32,.72],[0,1],[1,1],t)[0]}this.sbAni.progressEnd(e?1:0,s,n)}}render(){return s("slot",null)}get el(){return o(this)}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}});N.style=I;const q=e("ion_route",class{constructor(e){n(this,e);this.url="";this.ionRouteDataChanged=r(this,"ionRouteDataChanged",7)}onUpdate(e){this.ionRouteDataChanged.emit(e)}onComponentProps(e,t){if(e===t){return}const n=e?Object.keys(e):[];const s=t?Object.keys(t):[];if(n.length!==s.length){this.onUpdate(e);return}for(const i of n){if(e[i]!==t[i]){this.onUpdate(e);return}}}connectedCallback(){this.ionRouteDataChanged.emit()}static get watchers(){return{url:["onUpdate"],component:["onUpdate"],componentProps:["onComponentProps"]}}});const x="root";const D="forward";const G="back";const U=e=>{const t=e.filter(e=>e.length>0).join("/");return"/"+t};const W=e=>{const t=[];for(const n of e){for(const e of n.path){if(e[0]===":"){const s=n.params&&n.params[e.slice(1)];if(!s){return null}t.push(s)}else if(e!==""){t.push(e)}}}return t};const H=(e,t,n,s,i,o,r)=>{let a=U([...F(t),...s]);if(n){a="#"+a}if(r!==undefined){a=a+"?"+r}if(i===D){e.pushState(o,"",a)}else{e.replaceState(o,"",a)}};const $=(e,t)=>{if(e.length>t.length){return null}if(e.length<=1&&e[0]===""){return t}for(let n=0;n<e.length;n++){if(e[n].length>0&&e[n]!==t[n]){return null}}if(t.length===e.length){return[""]}return t.slice(e.length)};const _=(e,t,n)=>{let s=e.pathname;if(n){const t=e.hash;s=t[0]==="#"?t.slice(1):""}const i=F(t);const o=F(s);return $(i,o)};const F=e=>{if(e==null){return[""]}const t=e.split("?")[0];const n=t.split("/").map(e=>e.trim()).filter(e=>e.length>0);if(n.length===0){return[""]}else{return n}};const z=e=>{console.group(`[ion-core] ROUTES[${e.length}]`);for(const t of e){const e=[];t.forEach(t=>e.push(...t.path));const n=t.map(e=>e.id);console.debug(`%c ${U(e)}`,"font-weight: bold; padding-left: 20px","=>\t",`(${n.join(", ")})`)}console.groupEnd()};const M=e=>{console.group(`[ion-core] REDIRECTS[${e.length}]`);for(const t of e){if(t.to){console.debug("FROM: ",`$c ${U(t.from)}`,"font-weight: bold"," TO: ",`$c ${U(t.to)}`,"font-weight: bold")}}console.groupEnd()};const K=async(e,t,n,s,i=false,o)=>{try{const r=X(e);if(s>=t.length||!r){return i}await r.componentOnReady();const a=t[s];const c=await r.setRouteId(a.id,a.params,n,o);if(c.changed){n=x;i=true}i=await K(c.element,t,n,s+1,i,o);if(c.markVisible){await c.markVisible()}return i}catch(r){console.error(r);return false}};const Y=async e=>{const t=[];let n;let s=e;while(true){n=X(s);if(n){const e=await n.getRouteId();if(e){s=e.element;e.element=undefined;t.push(e)}else{break}}else{break}}return{ids:t,outlet:n}};const J=()=>{if(X(document.body)){return Promise.resolve()}return new Promise(e=>{window.addEventListener("ionNavWillLoad",e,{once:true})})};const Q=":not([no-router]) ion-nav, :not([no-router]) ion-tabs, :not([no-router]) ion-router-outlet";const X=e=>{if(!e){return undefined}if(e.matches(Q)){return e}const t=e.querySelector(Q);return t?t:undefined};const Z=(e,t)=>{const{from:n,to:s}=t;if(s===undefined){return false}if(n.length>e.length){return false}for(let i=0;i<n.length;i++){const t=n[i];if(t==="*"){return true}if(t!==e[i]){return false}}return n.length===e.length};const ee=(e,t)=>t.find(t=>Z(e,t));const te=(e,t)=>{const n=Math.min(e.length,t.length);let s=0;for(;s<n;s++){if(e[s].toLowerCase()!==t[s].id){break}}return s};const ne=(e,t)=>{const n=new ae(e);let s=false;let i;for(let r=0;r<t.length;r++){const e=t[r].path;if(e[0]===""){s=true}else{for(const t of e){const e=n.next();if(t[0]===":"){if(e===""){return null}i=i||[];const n=i[r]||(i[r]={});n[t.slice(1)]=e}else if(e!==t){return null}}s=false}}const o=s?s===(n.next()===""):true;if(!o){return null}if(i){return t.map((e,t)=>({id:e.id,path:e.path,params:se(e.params,i[t]),beforeEnter:e.beforeEnter,beforeLeave:e.beforeLeave}))}return t};const se=(e,t)=>{if(!e&&t){return t}else if(e&&!t){return e}else if(e&&t){return Object.assign(Object.assign({},e),t)}return undefined};const ie=(e,t)=>{let n=null;let s=0;const i=e.map(e=>e.id);for(const o of t){const e=te(i,o);if(e>s){n=o;s=e}}if(n){return n.map((t,n)=>({id:t.id,path:t.path,params:se(t.params,e[n]&&e[n].params)}))}return null};const oe=(e,t)=>{let n=null;let s=0;for(const i of t){const t=ne(e,i);if(t!==null){const e=re(t);if(e>s){s=e;n=t}}}return n};const re=e=>{let t=1;let n=1;for(const s of e){for(const e of s.path){if(e[0]===":"){t+=Math.pow(1,n)}else if(e!==""){t+=Math.pow(2,n)}n++}}return t};class ae{constructor(e){this.path=e.slice()}next(){if(this.path.length>0){return this.path.shift()}return""}}const ce=e=>Array.from(e.children).filter(e=>e.tagName==="ION-ROUTE-REDIRECT").map(e=>{const t=he(e,"to");return{from:F(he(e,"from")),to:t==null?undefined:F(t)}});const ue=e=>fe(le(e));const le=(e,t=e)=>Array.from(t.children).filter(e=>e.tagName==="ION-ROUTE"&&e.component).map(t=>{const n=he(t,"component");if(n==null){throw new Error("component missing in ion-route")}return{path:F(he(t,"url")),id:n.toLowerCase(),params:t.componentProps,beforeLeave:t.beforeLeave,beforeEnter:t.beforeEnter,children:le(e,t)}});const he=(e,t)=>{if(t in e){return e[t]}if(e.hasAttribute(t)){return e.getAttribute(t)}return null};const fe=e=>{const t=[];for(const n of e){de([],t,n)}return t};const de=(e,t,n)=>{const s=e.slice();s.push({id:n.id,path:n.path,params:n.params,beforeLeave:n.beforeLeave,beforeEnter:n.beforeEnter});if(n.children.length===0){t.push(s);return}for(const i of n.children){de(s,t,i)}};const me=e("ion_router",class{constructor(e){n(this,e);this.previousPath=null;this.busy=false;this.state=0;this.lastState=0;this.root="/";this.useHash=true;this.ionRouteWillChange=r(this,"ionRouteWillChange",7);this.ionRouteDidChange=r(this,"ionRouteDidChange",7)}async componentWillLoad(){console.debug("[ion-router] router will load");await J();console.debug("[ion-router] found nav");await this.onRoutesChanged()}componentDidLoad(){window.addEventListener("ionRouteRedirectChanged",h(this.onRedirectChanged.bind(this),10));window.addEventListener("ionRouteDataChanged",h(this.onRoutesChanged.bind(this),100))}async onPopState(){const e=this.historyDirection();let t=this.getPath();const n=await this.runGuards(t);if(n!==true){if(typeof n==="object"){t=F(n.redirect)}return false}console.debug("[ion-router] URL changed -> update nav",t,e);return this.writeNavStateRoot(t,e)}onBackButton(e){e.detail.register(0,e=>{this.back();e()})}async canTransition(){const e=await this.runGuards();if(e!==true){if(typeof e==="object"){return e.redirect}else{return false}}return true}async push(e,t="forward",n){if(e.startsWith(".")){e=new URL(e,window.location.href).pathname}console.debug("[ion-router] URL pushed -> updating nav",e,t);let s=F(e);let i=e.split("?")[1];const o=await this.runGuards(s);if(o!==true){if(typeof o==="object"){s=F(o.redirect);i=o.redirect.split("?")[1]}else{return false}}this.setPath(s,t,i);return this.writeNavStateRoot(s,t,n)}back(){window.history.back();return Promise.resolve(this.waitPromise)}async printDebug(){console.debug("CURRENT PATH",this.getPath());console.debug("PREVIOUS PATH",this.previousPath);z(ue(this.el));M(ce(this.el))}async navChanged(e){if(this.busy){console.warn("[ion-router] router is busy, navChanged was cancelled");return false}const{ids:t,outlet:n}=await Y(window.document.body);const s=ue(this.el);const i=ie(t,s);if(!i){console.warn("[ion-router] no matching URL for ",t.map(e=>e.id));return false}const o=W(i);if(!o){console.warn("[ion-router] router could not match path because some required param is missing");return false}console.debug("[ion-router] nav changed -> update URL",t,o);this.setPath(o,e);await this.safeWriteNavState(n,i,x,o,null,t.length);return true}onRedirectChanged(){const e=this.getPath();if(e&&ee(e,ce(this.el))){this.writeNavStateRoot(e,x)}}onRoutesChanged(){return this.writeNavStateRoot(this.getPath(),x)}historyDirection(){const e=window;if(e.history.state===null){this.state++;e.history.replaceState(this.state,e.document.title,e.document.location&&e.document.location.href)}const t=e.history.state;const n=this.lastState;this.lastState=t;if(t>n||t>=n&&n>0){return D}else if(t<n){return G}else{return x}}async writeNavStateRoot(e,t,n){if(!e){console.error("[ion-router] URL is not part of the routing set");return false}const s=ce(this.el);const i=ee(e,s);let o=null;if(i){this.setPath(i.to,t);o=i.from;e=i.to}const r=ue(this.el);const a=oe(e,r);if(!a){console.error("[ion-router] the path does not match any route");return false}return this.safeWriteNavState(document.body,a,t,e,o,0,n)}async safeWriteNavState(e,t,n,s,i,o=0,r){const a=await this.lock();let c=false;try{c=await this.writeNavState(e,t,n,s,i,o,r)}catch(u){console.error(u)}a();return c}async lock(){const e=this.waitPromise;let t;this.waitPromise=new Promise(e=>t=e);if(e!==undefined){await e}return t}async runGuards(e=this.getPath(),t=F(this.previousPath)){if(!e||!t){return true}const n=ue(this.el);const s=oe(e,n);const i=oe(t,n);const o=s&&s[s.length-1].beforeEnter;const r=i&&i[i.length-1].beforeLeave;const a=r?await r():true;if(a===false||typeof a==="object"){return a}const c=o?await o():true;if(c===false||typeof c==="object"){return c}return true}async writeNavState(e,t,n,s,i,o=0,r){if(this.busy){console.warn("[ion-router] router is busy, transition was cancelled");return false}this.busy=true;const a=this.routeChangeEvent(s,i);if(a){this.ionRouteWillChange.emit(a)}const c=await K(e,t,n,o,false,r);this.busy=false;if(c){console.debug("[ion-router] route changed",s)}if(a){this.ionRouteDidChange.emit(a)}return c}setPath(e,t,n){this.state++;H(window.history,this.root,this.useHash,e,t,this.state,n)}getPath(){return _(window.location,this.root,this.useHash)}routeChangeEvent(e,t){const n=this.previousPath;const s=U(e);this.previousPath=s;if(s===n){return null}const i=t?U(t):null;return{from:n,redirectedFrom:i,to:s}}get el(){return o(this)}})}}}));